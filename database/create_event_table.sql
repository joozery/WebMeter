-- Create event table for WebMeter system
-- This table stores user activity events and system logs

CREATE TABLE IF NOT EXISTS event (
    id SERIAL PRIMARY KEY,
    timestamp TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    username VARCHAR(100) NOT NULL,
    lognet VARCHAR(50),
    ip VARCHAR(45) NOT NULL,
    event TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Create indexes for better performance
CREATE INDEX IF NOT EXISTS idx_event_timestamp ON event(timestamp);
CREATE INDEX IF NOT EXISTS idx_event_username ON event(username);
CREATE INDEX IF NOT EXISTS idx_event_ip ON event(ip);
CREATE INDEX IF NOT EXISTS idx_event_created_at ON event(created_at);

-- Insert sample data for testing
INSERT INTO event (timestamp, username, lognet, ip, event) VALUES
('2024-01-15 09:30:15', 'admin', '10.0.0.1', '192.168.1.100', 'User login successful'),
('2024-01-15 09:35:22', 'admin', '10.0.0.1', '192.168.1.100', 'Dashboard accessed'),
('2024-01-15 09:40:18', 'admin', '10.0.0.1', '192.168.1.100', 'Meter data viewed'),
('2024-01-15 10:15:33', 'operator1', '10.0.0.2', '192.168.1.101', 'User login successful'),
('2024-01-15 10:20:45', 'operator1', '10.0.0.2', '192.168.1.101', 'Report generated'),
('2024-01-15 11:05:12', 'admin', '10.0.0.1', '192.168.1.100', 'System configuration updated'),
('2024-01-15 11:30:28', 'supervisor', '10.0.0.3', '192.168.1.102', 'User login successful'),
('2024-01-15 11:35:42', 'supervisor', '10.0.0.3', '192.168.1.102', 'User management accessed'),
('2024-01-15 12:00:15', 'admin', '10.0.0.1', '192.168.1.100', 'Data export initiated'),
('2024-01-15 12:15:33', 'operator1', '10.0.0.2', '192.168.1.101', 'Alarm acknowledged'),
('2024-01-15 13:20:18', 'admin', '10.0.0.1', '192.168.1.100', 'System backup completed'),
('2024-01-15 14:05:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Report exported'),
('2024-01-15 14:30:22', 'operator1', '10.0.0.2', '192.168.1.101', 'Meter configuration updated'),
('2024-01-15 15:10:45', 'admin', '10.0.0.1', '192.168.1.100', 'User logout'),
('2024-01-15 15:25:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'System maintenance mode enabled'),
('2024-01-15 16:00:12', 'admin', '10.0.0.1', '192.168.1.100', 'User login successful'),
('2024-01-15 16:15:28', 'admin', '10.0.0.1', '192.168.1.100', 'Database backup initiated'),
('2024-01-15 16:45:18', 'operator1', '10.0.0.2', '192.168.1.101', 'User login successful'),
('2024-01-15 17:00:42', 'operator1', '10.0.0.2', '192.168.1.101', 'Real-time monitoring accessed'),
('2024-01-15 17:30:15', 'admin', '10.0.0.1', '192.168.1.100', 'System logs reviewed'),
('2024-01-15 18:05:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'User login successful'),
('2024-01-15 18:20:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Performance report generated'),
('2024-01-15 19:00:22', 'admin', '10.0.0.1', '192.168.1.100', 'System maintenance completed'),
('2024-01-15 19:30:18', 'operator1', '10.0.0.2', '192.168.1.101', 'Alarm settings updated'),
('2024-01-15 20:15:45', 'admin', '10.0.0.1', '192.168.1.100', 'User logout'),
('2024-01-15 20:30:12', 'supervisor', '10.0.0.3', '192.168.1.102', 'System shutdown initiated'),
('2024-01-15 21:00:33', 'admin', '10.0.0.1', '192.168.1.100', 'System startup completed'),
('2024-01-15 21:15:28', 'admin', '10.0.0.1', '192.168.1.100', 'Database connection restored'),
('2024-01-15 21:45:15', 'operator1', '10.0.0.2', '192.168.1.101', 'User login successful'),
('2024-01-15 22:00:42', 'operator1', '10.0.0.2', '192.168.1.101', 'Night monitoring started'),
('2024-01-15 22:30:18', 'admin', '10.0.0.1', '192.168.1.100', 'Security audit completed'),
('2024-01-15 23:00:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'User login successful'),
('2024-01-15 23:15:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'Daily report generated'),
('2024-01-15 23:45:22', 'admin', '10.0.0.1', '192.168.1.100', 'System backup scheduled'),
('2024-01-16 00:00:15', 'system', '10.0.0.1', '192.168.1.100', 'Daily maintenance task started'),
('2024-01-16 00:30:42', 'system', '10.0.0.1', '192.168.1.100', 'Database optimization completed'),
('2024-01-16 01:00:18', 'system', '10.0.0.1', '192.168.1.100', 'Log rotation completed'),
('2024-01-16 01:30:33', 'system', '10.0.0.1', '192.168.1.100', 'System health check passed'),
('2024-01-16 02:00:55', 'system', '10.0.0.1', '192.168.1.100', 'Backup verification completed'),
('2024-01-16 02:30:22', 'system', '10.0.0.1', '192.168.1.100', 'Security scan completed'),
('2024-01-16 03:00:15', 'system', '10.0.0.1', '192.168.1.100', 'Performance metrics collected'),
('2024-01-16 03:30:42', 'system', '10.0.0.1', '192.168.1.100', 'Network connectivity verified'),
('2024-01-16 04:00:18', 'system', '10.0.0.1', '192.168.1.100', 'Meter data synchronization completed'),
('2024-01-16 04:30:33', 'system', '10.0.0.1', '192.168.1.100', 'Alarm system test completed'),
('2024-01-16 05:00:55', 'system', '10.0.0.1', '192.168.1.100', 'Daily maintenance task completed'),
('2024-01-16 06:00:22', 'admin', '10.0.0.1', '192.168.1.100', 'User login successful'),
('2024-01-16 06:15:15', 'admin', '10.0.0.1', '192.168.1.100', 'Morning system check completed'),
('2024-01-16 06:30:42', 'operator1', '10.0.0.2', '192.168.1.101', 'User login successful'),
('2024-01-16 06:45:18', 'operator1', '10.0.0.2', '192.168.1.101', 'Shift handover completed'),
('2024-01-16 07:00:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'User login successful'),
('2024-01-16 07:15:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Daily briefing accessed'),
('2024-01-16 07:30:22', 'admin', '10.0.0.1', '192.168.1.100', 'System performance review started'),
('2024-01-16 08:00:15', 'admin', '10.0.0.1', '192.168.1.100', 'User management session started'),
('2024-01-16 08:15:42', 'operator1', '10.0.0.2', '192.168.1.101', 'Real-time monitoring dashboard accessed'),
('2024-01-16 08:30:18', 'operator1', '10.0.0.2', '192.168.1.101', 'Meter status check completed'),
('2024-01-16 08:45:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'Report generation initiated'),
('2024-01-16 09:00:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Team performance review started'),
('2024-01-16 09:15:22', 'admin', '10.0.0.1', '192.168.1.100', 'System configuration backup created'),
('2024-01-16 09:30:15', 'admin', '10.0.0.1', '192.168.1.100', 'Security policy updated'),
('2024-01-16 09:45:42', 'operator1', '10.0.0.2', '192.168.1.101', 'Alarm acknowledgment completed'),
('2024-01-16 10:00:18', 'operator1', '10.0.0.2', '192.168.1.101', 'Meter calibration data reviewed'),
('2024-01-16 10:15:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'Monthly report finalized'),
('2024-01-16 10:30:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Team meeting scheduled'),
('2024-01-16 10:45:22', 'admin', '10.0.0.1', '192.168.1.100', 'Database maintenance scheduled'),
('2024-01-16 11:00:15', 'admin', '10.0.0.1', '192.168.1.100', 'System update notification sent'),
('2024-01-16 11:15:42', 'operator1', '10.0.0.2', '192.168.1.101', 'Meter reading verification completed'),
('2024-01-16 11:30:18', 'operator1', '10.0.0.2', '192.168.1.101', 'Data quality check completed'),
('2024-01-16 11:45:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'Performance metrics reviewed'),
('2024-01-16 12:00:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Team training session scheduled'),
('2024-01-16 12:15:22', 'admin', '10.0.0.1', '192.168.1.100', 'System health monitoring started'),
('2024-01-16 12:30:15', 'admin', '10.0.0.1', '192.168.1.100', 'Backup verification initiated'),
('2024-01-16 12:45:42', 'operator1', '10.0.0.2', '192.168.1.101', 'Meter communication test completed'),
('2024-01-16 13:00:18', 'operator1', '10.0.0.2', '192.168.1.101', 'Data synchronization verified'),
('2024-01-16 13:15:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'Compliance check completed'),
('2024-01-16 13:30:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Audit trail reviewed'),
('2024-01-16 13:45:22', 'admin', '10.0.0.1', '192.168.1.100', 'System optimization completed'),
('2024-01-16 14:00:15', 'admin', '10.0.0.1', '192.168.1.100', 'User session timeout configured'),
('2024-01-16 14:15:42', 'operator1', '10.0.0.2', '192.168.1.101', 'Meter firmware update initiated'),
('2024-01-16 14:30:18', 'operator1', '10.0.0.2', '192.168.1.101', 'Communication protocol updated'),
('2024-01-16 14:45:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'Team performance evaluation started'),
('2024-01-16 15:00:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Resource allocation updated'),
('2024-01-16 15:15:22', 'admin', '10.0.0.1', '192.168.1.100', 'System security audit initiated'),
('2024-01-16 15:30:15', 'admin', '10.0.0.1', '192.168.1.100', 'Access control policy updated'),
('2024-01-16 15:45:42', 'operator1', '10.0.0.2', '192.168.1.101', 'Meter configuration backup created'),
('2024-01-16 16:00:18', 'operator1', '10.0.0.2', '192.168.1.101', 'Data integrity check completed'),
('2024-01-16 16:15:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'Team meeting completed'),
('2024-01-16 16:30:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Project status updated'),
('2024-01-16 16:45:22', 'admin', '10.0.0.1', '192.168.1.100', 'System maintenance scheduled'),
('2024-01-16 17:00:15', 'admin', '10.0.0.1', '192.168.1.100', 'Backup retention policy updated'),
('2024-01-16 17:15:42', 'operator1', '10.0.0.2', '192.168.1.101', 'Meter reading validation completed'),
('2024-01-16 17:30:18', 'operator1', '10.0.0.2', '192.168.1.101', 'Data export completed'),
('2024-01-16 17:45:33', 'supervisor', '10.0.0.3', '192.168.1.102', 'Performance report generated'),
('2024-01-16 18:00:55', 'supervisor', '10.0.0.3', '192.168.1.102', 'Team training completed'),
('2024-01-16 18:15:22', 'admin', '10.0.0.1', '192.168.1.100', 'System shutdown initiated'),
('2024-01-16 18:30:15', 'admin', '10.0.0.1', '192.168.1.100', 'User logout'),
('2024-01-16 18:45:42', 'operator1', '10.0.0.2', '192.168.1.101', 'User logout'),
('2024-01-16 19:00:18', 'supervisor', '10.0.0.3', '192.168.1.102', 'User logout'),
('2024-01-16 19:15:33', 'system', '10.0.0.1', '192.168.1.100', 'Evening maintenance task started'),
('2024-01-16 19:30:55', 'system', '10.0.0.1', '192.168.1.100', 'System performance analysis completed'),
('2024-01-16 19:45:22', 'system', '10.0.0.1', '192.168.1.100', 'Log cleanup completed'),
('2024-01-16 20:00:15', 'system', '10.0.0.1', '192.168.1.100', 'Database statistics updated'),
('2024-01-16 20:15:42', 'system', '10.0.0.1', '192.168.1.100', 'Cache optimization completed'),
('2024-01-16 20:30:18', 'system', '10.0.0.1', '192.168.1.100', 'Network performance monitored'),
('2024-01-16 20:45:33', 'system', '10.0.0.1', '192.168.1.100', 'Security monitoring active'),
('2024-01-16 21:00:55', 'system', '10.0.0.1', '192.168.1.100', 'Backup verification completed'),
('2024-01-16 21:15:22', 'system', '10.0.0.1', '192.168.1.100', 'System health check completed'),
('2024-01-16 21:30:15', 'system', '10.0.0.1', '192.168.1.100', 'Evening maintenance task completed'),
('2024-01-16 22:00:42', 'admin', '10.0.0.1', '192.168.1.100', 'User login successful'),
('2024-01-16 22:15:18', 'admin', '10.0.0.1', '192.168.1.100', 'Night monitoring started'),
('2024-01-16 22:30:33', 'admin', '10.0.0.1', '192.168.1.100', 'System status verified'),
('2024-01-16 22:45:55', 'admin', '10.0.0.1', '192.168.1.100', 'Security scan initiated'),
('2024-01-16 23:00:22', 'admin', '10.0.0.1', '192.168.1.100', 'Backup process monitored'),
('2024-01-16 23:15:15', 'admin', '10.0.0.1', '192.168.1.100', 'System logs archived'),
('2024-01-16 23:30:42', 'admin', '10.0.0.1', '192.168.1.100', 'Performance metrics collected'),
('2024-01-16 23:45:18', 'admin', '10.0.0.1', '192.168.1.100', 'User logout');

-- Add comments to the table
COMMENT ON TABLE event IS 'Stores user activity events and system logs for WebMeter application';
COMMENT ON COLUMN event.id IS 'Primary key for event records';
COMMENT ON COLUMN event.timestamp IS 'Timestamp when the event occurred';
COMMENT ON COLUMN event.username IS 'Username of the user who triggered the event';
COMMENT ON COLUMN event.lognet IS 'Lognet IP address for network identification';
COMMENT ON COLUMN event.ip IS 'IP address of the client that triggered the event';
COMMENT ON COLUMN event.event IS 'Description of the event that occurred';
COMMENT ON COLUMN event.created_at IS 'Timestamp when the record was created in the database';
